<!DOCTYPE html>
<!--

This documentation was created by Artaengine doxer PHP source documenter.
http://artaengine.com

 -->
<html>
  <head>
    <title>Mobi_Mtld_DA_Device_DeviceApi documentation</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="description"  content="Generated by Artaengine DocBlocks"/>
    <link rel="shortcut icon" type="image/x-icon" href="resources/images/fav.png"/>
    <link rel="stylesheet" type="text/css" href="../../resources/css/style.css"/>
    <script src="../../resources/js/jquery.js" type="text/javascript"></script>
    <script type="text/javascript">
    //<![CDATA[
        $(document).ready(function () {
            $.expr[":"].contains = $.expr.createPseudo(function (arg) {
                    return function (elem) {
                    return $(elem).text().toUpperCase().indexOf(arg.toUpperCase()) >= 0;
                };
            });

            $('#search-input').keyup(function (e) {
                var text = $(this).val();
                $('#class-index li.item').hide();
                $("#class-index li.item a:contains('"+text+"')").parent().show();

                $('#consts h3').parent().hide();
                $("#consts h3:contains('"+text+"')").parent().show();

                $('#properties h3').parent().hide();
                $("#properties h3:contains('"+text+"')").parent().show();
                $('#static-properties h3').parent().hide();
                $("#static-properties h3:contains('"+text+"')").parent().show();

                $('#methods h3').parent().hide();
                $("#methods h3:contains('"+text+"')").parent().show();
                $('#static-methods h3').parent().hide();
                $("#static-methods h3:contains('"+text+"')").parent().show();
            });

            $('h2').click(function (e) {
                var id = $(this).attr('id');
                $('#'+id.substring(0, id.length - 6)).toggle('fast');
            });
        });
    //]]>
    </script>
  </head>
  <body>

    <!-- index of class members -->
    <ul id="class-index">
  <li id="search-input-container"><input id="search-input" type="text" placeholder="Search..."/></li>
  <li id="go-back"><a href="../../index.html">Mobi_Mtld_DA_Device</a></li>
  <ul>
  <li id="index-consts"><a href="#consts">Consts</a></li>
  <li class="item"><a href="#const-API_VERSION">API_VERSION</a></li>
<li class="item"><a href="#const-MIN_PHP_VERSION">MIN_PHP_VERSION</a></li>

</ul>
<ul>
  <li id="index-static-methods"><a href="#static-methods">Static methods</a></li>
  <li class="item"><a href="#method-getApiVersion">getApiVersion</a></li>

</ul>
<ul>
  <li id="index-methods"><a href="#methods">Methods</a></li>
  <li class="item"><a href="#method-__construct">__construct</a></li>
<li class="item"><a href="#method-getDataCreationTimestamp">getDataCreationTimestamp</a></li>
<li class="item"><a href="#method-getDataRevision">getDataRevision</a></li>
<li class="item"><a href="#method-getDataVersion">getDataVersion</a></li>
<li class="item"><a href="#method-getLookupSource">getLookupSource</a></li>
<li class="item"><a href="#method-getProperties">getProperties</a></li>
<li class="item"><a href="#method-getProperties ">getProperties </a></li>
<li class="item"><a href="#method-getPropertiesFromUa">getPropertiesFromUa</a></li>
<li class="item"><a href="#method-getPropertyNames">getPropertyNames</a></li>
<li class="item"><a href="#method-loadDataFromFile">loadDataFromFile</a></li>
<li class="item"><a href="#method-loadDataFromString">loadDataFromString</a></li>
<li class="item"><a href="#method-setConfig">setConfig</a></li>

</ul>

</ul>


    <div id="goto-top"><a href="#">TOP</a></div>

    <div id="doc">
      <h1>Mobi_Mtld_DA_Device_DeviceApi</h1>

      <div id="class-specs">
        <div id="class-comment">The DeviceAtlas device detection API provides a way to detect devices based
on the HTTP headers. Using the headers, the API returns device properties such
as screen width, screen height, is mobile, vendor, model etc. If you want to
use the DeviceAtlas API for web applications then it is recommended to use
DeviceApiWeb instead of this library.<br/>
The DeviceApiWeb is preferred when you want to get the properties from a
real-time detection on user's device in a web application.
The DeviceApi is preferred when you want to get the properties from an
off-line user-agent list or header set.<br/><br/>

To get the most accurate results: 1- Pass the whole HTTP headers.
2- Use the DeviceAtlas client-side-component and pass the result.<br/><br/>

Valid inputs are:<br/>
$deviceApi->getProperties((array) headers, string clientSide)<br/>
$deviceApi->getProperties((array) headers)<br/>
$deviceApi->getProperties(string userAgent, string clientSide)<br/>
$deviceApi->getProperties(string userAgent)<br/><br/>

Example usage:<br/>
<pre>
 $headers = array(
     "user-agent"      => "...",
     "accept-language" => "...",
     // add any other available header...
 );

 require_once "/PATH/TO/Api/Device/DeviceApi.php";
 $deviceApi = new Mobi_Mtld_DA_Device_DeviceApi();

 try {
     $deviceApi->loadDataFromFile("/path/to/datafile.json");

     // get all properties from the headers
     $props = $deviceApi->getProperties($headers);

     // .... use the properties ....
     if ($props->contains("isMobilePhone", true)) {
         // it is a mobile phone
     }

     // check if property exists then get the property value
     $displayWidth = $props->containsKey("displayWidth")?
         $props->get("displayWidth")->asInteger(): 100;

     // the most easy way to get a property value
     $deviceModel = $props->model; // null or string
 } catch (...
 </pre></div>
        <div id="class-info">
          <dl><dt class="file">Source</dt>
<dd class="file">DeviceApi.php</dd>
<dt class="dependencies">Depends on</dt>
<dd class="dependencies"><a href="../../Mobi_Mtld_DA_Device/classes/Mobi_Mtld_DA_Device_Config.html">Mobi_Mtld_DA_Device_Config</a><br/><a href="../../Mobi_Mtld_DA_CacheProvider/classes/Mobi_Mtld_DA_CacheProvider_VolatileCacheProvider.html">Mobi_Mtld_DA_CacheProvider_VolatileCacheProvider</a><br/><a href="../../Mobi_Mtld_DA_Device/classes/Mobi_Mtld_DA_Device_TreeOptimized.html">Mobi_Mtld_DA_Device_TreeOptimized</a><br/><a href="../../Mobi_Mtld_DA_Device/classes/Mobi_Mtld_DA_Device_Tree.html">Mobi_Mtld_DA_Device_Tree</a><br/><a href="../../Mobi_Mtld_DA/classes/Mobi_Mtld_DA_PropertyName.html">Mobi_Mtld_DA_PropertyName</a><br/><a href="../../Mobi_Mtld_DA/classes/Mobi_Mtld_DA_Properties.html">Mobi_Mtld_DA_Properties</a><br/><a href="../../Mobi_Mtld_DA/classes/Mobi_Mtld_DA_DataType.html">Mobi_Mtld_DA_DataType</a><br/><a href="../../Mobi_Mtld_DA/classes/Mobi_Mtld_DA_Property.html">Mobi_Mtld_DA_Property</a></dd>
</dl>
        </div>
        <div id="class-atts"><dl class="class-atts"><dt class="package">Package</dt>
<dd class="package">Mobi\Mtld\DA\Device</dd>
<dt class="version">Version</dt>
<dd class="version">2.1.0</dd>
<dt class="author">Author</dt>
<dd class="author">Afilias Technologies Ltd</dd>
<dt class="copyright">Copyright</dt>
<dd class="copyright">Copyright (c) 2008-2015 by Afilias Technologies Limited (dotMobi). All rights reserved.</dd>
</dl>
</div>
      </div>

      <h2 id="consts-title">Constants</h2>
<div id="consts"><div class="const odd first" id="const-API_VERSION">
  <h3>API_VERSION <span>= '2.1'</span></h3>
  <div class="const-specs">
    <p class="const-comment">Api version.</p>
    
  </div>
</div>
<div class="const even last" id="const-MIN_PHP_VERSION">
  <h3>MIN_PHP_VERSION <span>= '5.2.3'</span></h3>
  <div class="const-specs">
    <p class="const-comment">Minimum PHP version required for this API to run. *</p>
    
  </div>
</div>
</div>


      

      

      <h2 id="static-methods-title">Static Methods</h2>
<div id="static-methods"><div class="method public static odd first last" id="method-getApiVersion">
  <h3>getApiVersion</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">string </span>Mobi_Mtld_DA_Device_DeviceApi::getApiVersion()</pre></div>

    <p class="method-comment">Get DeviceApi version.</p>

    
    
    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">string</dt>
<dd class=""> DeviceApi version</dd>
</dl>

</div>


    

  </div>
</div>
</div>


      <h2 id="methods-title">Methods</h2>
<div id="methods"><div class="method public  odd first" id="method-__construct">
  <h3>__construct</h3>
  <div class="method-specs">

    <div><pre class="method-def expanded"><span class="return-type">Mobi_Mtld_DA_Device_DeviceApi</span> $obj = new Mobi_Mtld_DA_Device_DeviceApi(
    <span class="param-type">Mobi_Mtld_DA_Device_Config</span> <span class="param-name">config</span>
)</pre></div>

    <p class="method-comment">Constructs a DeviceApi instance with custom configs.</p>

    <dl class="method-atts"><dt class="see">See also</dt>
<dd class="see"><a href="../../Mobi_Mtld_DA_Device/classes/Mobi_Mtld_DA_Device_Config.html">Mobi_Mtld_DA_Device_Config</a></dd>
</dl>

    <h4>Arguments</h4>
<div class="method-args">
  <ul class="items-container">
<div class="argument">
  <dl>
    <dt>
      config
      <span>(<a href="../../Mobi_Mtld_DA_Device/classes/Mobi_Mtld_DA_Device_Config.html">Mobi_Mtld_DA_Device_Config</a>)</span>
    </dt>
    <dd>
       An instance of Config, you can change the
DeviceAtlas API configs by creating an instance or Config and setting your
preferences config values then passing the instance to the DeviceApi constructor.
null=use default configs.
    </dd>
  </dl>
</div>

</ul>

</div>


    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">void</dt>
<dd class=""></dd>
</dl>

</div>


    

  </div>
</div>
<div class="method public  even" id="method-getDataCreationTimestamp">
  <h3>getDataCreationTimestamp</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">string </span>$obj->getDataCreationTimestamp()</pre></div>

    <p class="method-comment">Get the device data creation (JSON file) timestamp.</p>

    
    
    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">string</dt>
<dd class=""> The string data creation timestamp</dd>
</dl>

</div>


    

  </div>
</div>
<div class="method public  odd" id="method-getDataRevision">
  <h3>getDataRevision</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">int </span>$obj->getDataRevision()</pre></div>

    <p class="method-comment">Get the device data generation revision.</p>

    
    
    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">int</dt>
<dd class=""> Data generation revision</dd>
</dl>

</div>


    

  </div>
</div>
<div class="method public  even" id="method-getDataVersion">
  <h3>getDataVersion</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">string </span>$obj->getDataVersion()</pre></div>

    <p class="method-comment">Get the device data (JSON file) version.</p>

    
    
    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">string</dt>
<dd class=""> The data version</dd>
</dl>

</div>


    

  </div>
</div>
<div class="method public  odd" id="method-getLookupSource">
  <h3>getLookupSource</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">string </span>$obj->getLookupSource()</pre></div>

    <p class="method-comment">Get the source properties fetch source to be used for debugging.</p>

    
    
    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">string</dt>
<dd class=""> The value of one this constants: LOOKUP_SOURCE_TREE or LOOKUP_SOURCE_OPTIMIZED_TREE or LOOKUP_SOURCE_CACHE</dd>
</dl>

</div>


    

  </div>
</div>
<div class="method public  even" id="method-getProperties">
  <h3>getProperties</h3>
  <div class="method-specs">

    <div><pre class="method-def expanded"><span class="return-type">Mobi_Mtld_DA_Properties </span>$obj->getProperties(
    <span class="param-type">string</span> <span class="param-name">userAgent</span>,
    <span class="param-type">string</span> <span class="param-name">clientSideProperties=null</span>
)</pre></div>

    <p class="method-comment">Get the properties for a User-Agent merged with the client-side properties
(when provided by the DeviceAtlas client side component).
The DeviceAtlas client-side component (JavaScript library) collects the
client-side properties and puts them in a cookie.
The contents of this cookie must be passed to this method. The client properties
will over-ride any properties discovered from the main JSON data file.</p>

    
    <h4>Arguments</h4>
<div class="method-args">
  <ul class="items-container">
<div class="argument">
  <dl>
    <dt>
      userAgent
      <span>(string)</span>
    </dt>
    <dd>
                       The User-Agent string
    </dd>
  </dl>
</div>
<div class="argument">
  <dl>
    <dt>
      clientSideProperties=null
      <span>(string)</span>
    </dt>
    <dd>
       The contents of the cookie containing the client side properties
    </dd>
  </dl>
</div>

</ul>

</div>


    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class=""><a href="../../Mobi_Mtld_DA/classes/Mobi_Mtld_DA_Properties.html">Mobi_Mtld_DA_Properties</a></dt>
<dd class=""> A set of properties (Property objects) wrapped in a Properties object</dd>
</dl>

</div>


    <h4>Throws</h4>
<div class="method-throws">
  <ul class="items-container">
<li><a href="../../Mobi_Mtld_DA_Exception/classes/Mobi_Mtld_DA_Exception_ClientPropertiesException.html">Mobi_Mtld_DA_Exception_ClientPropertiesException</a></li>

</ul>

</div>



  </div>
</div>
<div class="method public  odd" id="method-getProperties ">
  <h3>getProperties </h3>
  <div class="method-specs">

    <div><pre class="method-def expanded"><span class="return-type">Mobi_Mtld_DA_Properties </span>$obj->getProperties(
    <span class="param-type">array</span> <span class="param-name">headers</span>,
    <span class="param-type">string</span> <span class="param-name">clientSideProperties=null</span>
)</pre></div>

    <p class="method-comment">Get the properties for a set of HTTP headers merged with properties from the
client side component. The DeviceApi gets all the request HTTP headers and will
precisely detect the device and find property values by all usable headers.
Get the properties for a User-Agent merged with the client-side properties
(when provided by the DeviceAtlas client side component).
The DeviceAtlas client-side component (JavaScript library) collects the
client-side properties and puts them in a cookie.
The contents of this cookie must be passed to this method. The client properties
will over-ride any properties discovered from the main JSON data file.</p>

    
    <h4>Arguments</h4>
<div class="method-args">
  <ul class="items-container">
<div class="argument">
  <dl>
    <dt>
      headers
      <span>(array)</span>
    </dt>
    <dd>
                         Client's request HTTP headers
    </dd>
  </dl>
</div>
<div class="argument">
  <dl>
    <dt>
      clientSideProperties=null
      <span>(string)</span>
    </dt>
    <dd>
       The contents of the cookie containing the client side properties
    </dd>
  </dl>
</div>

</ul>

</div>


    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class=""><a href="../../Mobi_Mtld_DA/classes/Mobi_Mtld_DA_Properties.html">Mobi_Mtld_DA_Properties</a></dt>
<dd class=""> A set of properties (Property objects) wrapped in a Properties object</dd>
</dl>

</div>


    <h4>Throws</h4>
<div class="method-throws">
  <ul class="items-container">
<li><a href="../../Mobi_Mtld_DA_Exception/classes/Mobi_Mtld_DA_Exception_ClientPropertiesException.html">Mobi_Mtld_DA_Exception_ClientPropertiesException</a></li>

</ul>

</div>



  </div>
</div>
<div class="method public  even" id="method-getPropertiesFromUa">
  <h3>getPropertiesFromUa</h3>
  <div class="method-specs">

    <div><pre class="method-def expanded"><span class="return-type">Mobi_Mtld_DA_Properties </span>$obj->getPropertiesFromUa(
    <span class="param-type">string</span> <span class="param-name">userAgent</span>,
    <span class="param-type">string</span> <span class="param-name">clientSideProperties=null</span>
)</pre></div>

    <p class="method-comment">Get the properties for a User-Agent merged with the client-side properties
(when provided by the DeviceAtlas client side component).
The DeviceAtlas client-side component (JavaScript library) collects the
client-side properties and puts them in a cookie.
The contents of this cookie must be passed to this method. The client properties
will over-ride any properties discovered from the main JSON data file.</p>

    
    <h4>Arguments</h4>
<div class="method-args">
  <ul class="items-container">
<div class="argument">
  <dl>
    <dt>
      userAgent
      <span>(string)</span>
    </dt>
    <dd>
                       The User-Agent string
    </dd>
  </dl>
</div>
<div class="argument">
  <dl>
    <dt>
      clientSideProperties=null
      <span>(string)</span>
    </dt>
    <dd>
       The contents of the cookie containing the client side properties
    </dd>
  </dl>
</div>

</ul>

</div>


    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class=""><a href="../../Mobi_Mtld_DA/classes/Mobi_Mtld_DA_Properties.html">Mobi_Mtld_DA_Properties</a></dt>
<dd class=""> A set of properties (Property objects) wrapped in a Properties object</dd>
</dl>

</div>


    <h4>Throws</h4>
<div class="method-throws">
  <ul class="items-container">
<li><a href="../../Mobi_Mtld_DA_Exception/classes/Mobi_Mtld_DA_Exception_ClientPropertiesException.html">Mobi_Mtld_DA_Exception_ClientPropertiesException</a></li>

</ul>

</div>



  </div>
</div>
<div class="method public  odd" id="method-getPropertyNames">
  <h3>getPropertyNames</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">array </span>$obj->getPropertyNames()</pre></div>

    <p class="method-comment">Get a set of available device property names.</p>

    
    
    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">array</dt>
<dd class=""> A set of available device property names as PropertyName objects.
A PropertyName object holds a property-name and it's data-type</dd>
</dl>

</div>


    

  </div>
</div>
<div class="method public  even" id="method-loadDataFromFile">
  <h3>loadDataFromFile</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">void </span>$obj->loadDataFromFile(<span class="param-type">string</span> <span class="param-name">jsonDataFilePath</span>)</pre></div>

    <p class="method-comment">Load the DeviceAtlas device detection data into the API from a JSON file.
The JSON data file is provided by the DeviceAtlas web-site.</p>

    
    <h4>Arguments</h4>
<div class="method-args">
  <ul class="items-container">
<div class="argument">
  <dl>
    <dt>
      jsonDataFilePath
      <span>(string)</span>
    </dt>
    <dd>
       Path to the JSON file
    </dd>
  </dl>
</div>

</ul>

</div>


    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">void</dt>
<dd class=""></dd>
</dl>

</div>


    <h4>Throws</h4>
<div class="method-throws">
  <ul class="items-container">
<li>IOException</li>
<li><a href="../../Mobi_Mtld_DA_Exception/classes/Mobi_Mtld_DA_Exception_DataFileException.html">Mobi_Mtld_DA_Exception_DataFileException</a></li>
<li><a href="../../Mobi_Mtld_DA_Exception/classes/Mobi_Mtld_DA_Exception_DataReadException.html">Mobi_Mtld_DA_Exception_DataReadException</a></li>
<li><a href="../../Mobi_Mtld_DA_Exception/classes/Mobi_Mtld_DA_Exception_JsonException.html">Mobi_Mtld_DA_Exception_JsonException</a></li>

</ul>

</div>



  </div>
</div>
<div class="method public  odd" id="method-loadDataFromString">
  <h3>loadDataFromString</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">void </span>$obj->loadDataFromString(<span class="param-type">string</span> <span class="param-name">data</span>)</pre></div>

    <p class="method-comment">Load the DeviceAtlas device detection data into the API from a string.
The JSON data file is provided by the DeviceAtlas web-site.</p>

    
    <h4>Arguments</h4>
<div class="method-args">
  <ul class="items-container">
<div class="argument">
  <dl>
    <dt>
      data
      <span>(string)</span>
    </dt>
    <dd>
       DeviceAtlas device data
    </dd>
  </dl>
</div>

</ul>

</div>


    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">void</dt>
<dd class=""></dd>
</dl>

</div>


    <h4>Throws</h4>
<div class="method-throws">
  <ul class="items-container">
<li><a href="../../Mobi_Mtld_DA_Exception/classes/Mobi_Mtld_DA_Exception_DataFileException.html">Mobi_Mtld_DA_Exception_DataFileException</a></li>
<li><a href="../../Mobi_Mtld_DA_Exception/classes/Mobi_Mtld_DA_Exception_JsonException.html">Mobi_Mtld_DA_Exception_JsonException</a></li>

</ul>

</div>



  </div>
</div>
<div class="method public  even last" id="method-setConfig">
  <h3>setConfig</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">void </span>$obj->setConfig(<span class="param-type">Mobi_Mtld_DA_Device_Config</span> <span class="param-name">$config</span>)</pre></div>

    <p class="method-comment">Set new config settings via a new Config object and drop current cache.</p>

    
    <h4>Arguments</h4>
<div class="method-args">
  <ul class="items-container">
<div class="argument">
  <dl>
    <dt>
      $config
      <span>(<a href="../../Mobi_Mtld_DA_Device/classes/Mobi_Mtld_DA_Device_Config.html">Mobi_Mtld_DA_Device_Config</a>)</span>
    </dt>
    <dd>
      
    </dd>
  </dl>
</div>

</ul>

</div>


    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">void</dt>
<dd class=""></dd>
</dl>

</div>


    

  </div>
</div>
</div>


    </div>
  </body>
</html>

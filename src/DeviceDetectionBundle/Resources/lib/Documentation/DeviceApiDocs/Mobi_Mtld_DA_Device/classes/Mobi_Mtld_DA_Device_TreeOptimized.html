<!DOCTYPE html>
<!--

This documentation was created by Artaengine doxer PHP source documenter.
http://artaengine.com

 -->
<html>
  <head>
    <title>Mobi_Mtld_DA_Device_TreeOptimized documentation</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="description"  content="Generated by Artaengine DocBlocks"/>
    <link rel="shortcut icon" type="image/x-icon" href="resources/images/fav.png"/>
    <link rel="stylesheet" type="text/css" href="../../resources/css/style.css"/>
    <script src="../../resources/js/jquery.js" type="text/javascript"></script>
    <script type="text/javascript">
    //<![CDATA[
        $(document).ready(function () {
            $.expr[":"].contains = $.expr.createPseudo(function (arg) {
                    return function (elem) {
                    return $(elem).text().toUpperCase().indexOf(arg.toUpperCase()) >= 0;
                };
            });

            $('#search-input').keyup(function (e) {
                var text = $(this).val();
                $('#class-index li.item').hide();
                $("#class-index li.item a:contains('"+text+"')").parent().show();

                $('#consts h3').parent().hide();
                $("#consts h3:contains('"+text+"')").parent().show();

                $('#properties h3').parent().hide();
                $("#properties h3:contains('"+text+"')").parent().show();
                $('#static-properties h3').parent().hide();
                $("#static-properties h3:contains('"+text+"')").parent().show();

                $('#methods h3').parent().hide();
                $("#methods h3:contains('"+text+"')").parent().show();
                $('#static-methods h3').parent().hide();
                $("#static-methods h3:contains('"+text+"')").parent().show();
            });

            $('h2').click(function (e) {
                var id = $(this).attr('id');
                $('#'+id.substring(0, id.length - 6)).toggle('fast');
            });
        });
    //]]>
    </script>
  </head>
  <body>

    <!-- index of class members -->
    <ul id="class-index">
  <li id="search-input-container"><input id="search-input" type="text" placeholder="Search..."/></li>
  <li id="go-back"><a href="../../index.html">Mobi_Mtld_DA_Device</a></li>
  <ul>
  <li id="index-consts"><a href="#consts">Consts</a></li>
  <li class="item"><a href="#const-CACHED_JSON_HISTORY_FILE_NAME">CACHED_JSON_HISTORY_FILE_NAME</a></li>
<li class="item"><a href="#const-CACHED_JSON_INFO_FILE_NAME">CACHED_JSON_INFO_FILE_NAME</a></li>

</ul>
<ul>
  <li id="index-methods"><a href="#methods">Methods</a></li>
  <li class="item"><a href="#method-__construct">__construct</a></li>
<li class="item"><a href="#method-getDataCreationTimestamp">getDataCreationTimestamp</a></li>
<li class="item"><a href="#method-getDataVersion">getDataVersion</a></li>
<li class="item"><a href="#method-getLookupSource">getLookupSource</a></li>
<li class="item"><a href="#method-getPropertyNames">getPropertyNames</a></li>
<li class="item"><a href="#method-loadTreeFromFile">loadTreeFromFile</a></li>
<li class="item"><a href="#method-loadTreeFromString">loadTreeFromString</a></li>
<li class="item"><a href="#method-putProperties">putProperties</a></li>
<li class="item"><a href="#method-putTreeWalkProperties">putTreeWalkProperties</a></li>
<li class="item"><a href="#method-setConfig">setConfig</a></li>
<li class="item"><a href="#method-clearCache">clearCache</a></li>
<li class="item"><a href="#method-populateCache">populateCache</a></li>

</ul>

</ul>


    <div id="goto-top"><a href="#">TOP</a></div>

    <div id="doc">
      <h1>Mobi_Mtld_DA_Device_TreeOptimized</h1>

      <div id="class-specs">
        <div id="class-comment">This class is used by the main API class and should not be used directly.</div>
        <div id="class-info">
          <dl><dt class="file">Source</dt>
<dd class="file">TreeOptimized.php</dd>
<dt class="dependencies">Depends on</dt>
<dd class="dependencies">type<br/><a href="../../Mobi_Mtld_DA_Exception/classes/Mobi_Mtld_DA_Exception_FileWriteException.html">Mobi_Mtld_DA_Exception_FileWriteException</a><br/><a href="../../Mobi_Mtld_DA_Device/classes/Mobi_Mtld_DA_Device_DeviceApi.html">Mobi_Mtld_DA_Device_DeviceApi</a></dd>
<dt class="extends">Extends</dt>
<dd class="extends"><a href="../../Mobi_Mtld_DA_Device/classes/Mobi_Mtld_DA_Device_Tree.html">Mobi_Mtld_DA_Device_Tree</a></dd>
</dl>
        </div>
        <div id="class-atts"><dl class="class-atts"><dt class="package">Package</dt>
<dd class="package">Mobi\Mtld\DA\Device</dd>
<dt class="author">Author</dt>
<dd class="author">Afilias Technologies Ltd</dd>
<dt class="copyright">Copyright</dt>
<dd class="copyright">Copyright (c) 2008-2015 by Afilias Technologies Limited (dotMobi). All rights reserved.</dd>
</dl>
</div>
      </div>

      <h2 id="consts-title">Constants</h2>
<div id="consts"><div class="const odd first" id="const-CACHED_JSON_HISTORY_FILE_NAME">
  <h3>CACHED_JSON_HISTORY_FILE_NAME <span>= 'da-cache-history'</span></h3>
  <div class="const-specs">
    <p class="const-comment">Name of the file that keeps a history of the cached data file directories.</p>
    
  </div>
</div>
<div class="const even last" id="const-CACHED_JSON_INFO_FILE_NAME">
  <h3>CACHED_JSON_INFO_FILE_NAME <span>= 'da-cached-info'</span></h3>
  <div class="const-specs">
    <p class="const-comment">Name of the file that stores the cached data file's file-size and file-modification-time.
This info is used to sense auto data file changes.</p>
    
  </div>
</div>
</div>


      

      

      

      <h2 id="methods-title">Methods</h2>
<div id="methods"><div class="method public  odd first" id="method-__construct">
  <h3>__construct</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">Mobi_Mtld_DA_Device_TreeOptimized</span> $obj = new Mobi_Mtld_DA_Device_TreeOptimized()</pre></div>

    <p class="method-comment">Create the JSON tree handler.</p>

    
    
    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">void</dt>
<dd class=""></dd>
</dl>

</div>


    

  </div>
</div>
<div class="method public  even" id="method-getDataCreationTimestamp">
  <h3>getDataCreationTimestamp</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">void </span>$obj->getDataCreationTimestamp()</pre></div>

    <p class="method-comment">Get data file creation timestamp</p>

    
    
    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">void</dt>
<dd class=""></dd>
</dl>

</div>


    

  </div>
</div>
<div class="method public  odd" id="method-getDataVersion">
  <h3>getDataVersion</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">void </span>$obj->getDataVersion()</pre></div>

    <p class="method-comment">Get data file version</p>

    
    
    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">void</dt>
<dd class=""></dd>
</dl>

</div>


    

  </div>
</div>
<div class="method public  even" id="method-getLookupSource">
  <h3>getLookupSource</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">string </span>$obj->getLookupSource()</pre></div>

    <p class="method-comment">Get the source properties fetch source to be used for debugging.</p>

    
    
    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">string</dt>
<dd class=""> 'tree' or 'optimized tree' or 'cache'</dd>
</dl>

</div>


    

  </div>
</div>
<div class="method public  odd" id="method-getPropertyNames">
  <h3>getPropertyNames</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">void </span>$obj->getPropertyNames()</pre></div>

    <p class="method-comment">Get the list of all available property names from the tree (not contains client side props)</p>

    
    
    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">void</dt>
<dd class=""></dd>
</dl>

</div>


    

  </div>
</div>
<div class="method public  even" id="method-loadTreeFromFile">
  <h3>loadTreeFromFile</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">void </span>$obj->loadTreeFromFile()</pre></div>

    <p class="method-comment">Load the JSON tree file into the handler.</p>

    
    
    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">void</dt>
<dd class=""></dd>
</dl>

</div>


    <h4>Throws</h4>
<div class="method-throws">
  <ul class="items-container">
<li><a href="../../Mobi_Mtld_DA_Exception/classes/Mobi_Mtld_DA_Exception_DataFileException.html">Mobi_Mtld_DA_Exception_DataFileException</a></li>
<li><a href="../../Mobi_Mtld_DA_Exception/classes/Mobi_Mtld_DA_Exception_JsonException.html">Mobi_Mtld_DA_Exception_JsonException</a></li>

</ul>

</div>



  </div>
</div>
<div class="method public  odd" id="method-loadTreeFromString">
  <h3>loadTreeFromString</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">void </span>$obj->loadTreeFromString()</pre></div>

    <p class="method-comment">Load the JSON tree into the handler.</p>

    
    
    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">void</dt>
<dd class=""></dd>
</dl>

</div>


    <h4>Throws</h4>
<div class="method-throws">
  <ul class="items-container">
<li><a href="../../Mobi_Mtld_DA_Exception/classes/Mobi_Mtld_DA_Exception_JsonException.html">Mobi_Mtld_DA_Exception_JsonException</a></li>

</ul>

</div>



  </div>
</div>
<div class="method public  even" id="method-putProperties">
  <h3>putProperties</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">void </span>$obj->putProperties(<span class="param-type">string</span> <span class="param-name">userAgent</span>, <span class="param-type">array</span> <span class="param-name">stockUserAgents</span>, <span class="param-type">string</span> <span class="param-name">clientside</span>)</pre></div>

    <p class="method-comment">Get properties from tree walk/ua/client-side and put them in the tree.properties
use cached properties if exists.</p>

    
    <h4>Arguments</h4>
<div class="method-args">
  <ul class="items-container">
<div class="argument">
  <dl>
    <dt>
      userAgent
      <span>(string)</span>
    </dt>
    <dd>
             user-agent string (from the original User-Agent header) to be used for detecting ua-props
    </dd>
  </dl>
</div>
<div class="argument">
  <dl>
    <dt>
      stockUserAgents
      <span>(array)</span>
    </dt>
    <dd>
       list of candidate user-agent strings to be used for the tree walk
    </dd>
  </dl>
</div>
<div class="argument">
  <dl>
    <dt>
      clientside
      <span>(string)</span>
    </dt>
    <dd>
            client side properties or null
    </dd>
  </dl>
</div>

</ul>

</div>


    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">void</dt>
<dd class=""></dd>
</dl>

</div>


    

  </div>
</div>
<div class="method public  odd" id="method-putTreeWalkProperties">
  <h3>putTreeWalkProperties</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">void </span>$obj->putTreeWalkProperties(<span class="param-type">userAgent</span> <span class="param-name">user-agent</span>, <span class="param-type">stockUserAgents</span> <span class="param-name">list</span>)</pre></div>

    <p class="method-comment">Get properties from tree walk/ua and put them in the tree.properties

if stockUserAgents != null
- iterate over stockUserAgents
for each item: tree-walk and stop iteration if result has deviceId
- use userAgent for detecting the ua-props

if stockUserAgents == null
- use userAgent for tree walk
- use userAgent for detecting the ua-props</p>

    
    <h4>Arguments</h4>
<div class="method-args">
  <ul class="items-container">
<div class="argument">
  <dl>
    <dt>
      user-agent
      <span>(userAgent)</span>
    </dt>
    <dd>
       string (from the original User-Agent header)
    </dd>
  </dl>
</div>
<div class="argument">
  <dl>
    <dt>
      list
      <span>(stockUserAgents)</span>
    </dt>
    <dd>
       of candidate user-agent strings to be used for tree walk
    </dd>
  </dl>
</div>

</ul>

</div>


    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">void</dt>
<dd class=""></dd>
</dl>

</div>


    

  </div>
</div>
<div class="method public  even" id="method-setConfig">
  <h3>setConfig</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">void </span>$obj->setConfig(<span class="param-type">type</span> <span class="param-name">$config</span>)</pre></div>

    <p class="method-comment">Set new config settings via a new Config object.</p>

    
    <h4>Arguments</h4>
<div class="method-args">
  <ul class="items-container">
<div class="argument">
  <dl>
    <dt>
      $config
      <span>(type)</span>
    </dt>
    <dd>
      
    </dd>
  </dl>
</div>

</ul>

</div>


    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">void</dt>
<dd class=""></dd>
</dl>

</div>


    

  </div>
</div>
<div class="method public  odd" id="method-clearCache">
  <h3>clearCache</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">void </span>$obj->clearCache()</pre></div>

    <p class="method-comment">Remove all tree optimization cache files</p>

    
    
    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">void</dt>
<dd class=""></dd>
</dl>

</div>


    

  </div>
</div>
<div class="method public  even last" id="method-populateCache">
  <h3>populateCache</h3>
  <div class="method-specs">

    <div><pre class="method-def compact"><span class="return-type">bool </span>$obj->populateCache(<span class="param-type">bool</span> <span class="param-name">force=false</span>)</pre></div>

    <p class="method-comment">Break down the DeviceAtlas JSON data file into smaller files and save the
batch into "/da-api-temp-dir/batch-cache-dir".</p>

    
    <h4>Arguments</h4>
<div class="method-args">
  <ul class="items-container">
<div class="argument">
  <dl>
    <dt>
      force=false
      <span>(bool)</span>
    </dt>
    <dd>
       false=do not populate if batch already exists
    </dd>
  </dl>
</div>

</ul>

</div>


    <h4>Returns</h4>
<div class="method-return">
  <dl class="method-return"><dt class="">bool</dt>
<dd class=""> true=populated json batch cache files</dd>
</dl>

</div>


    

  </div>
</div>
</div>


    </div>
  </body>
</html>

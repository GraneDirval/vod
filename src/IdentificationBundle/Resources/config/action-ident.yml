services:
    IdentificationBundle\Identification\Handler\DefaultHandler:
        arguments:
            - '@IdentificationBundle\Repository\UserRepository'

    IdentificationBundle\Identification\Handler\IdentificationHandlerProvider:
        arguments:
            - '@IdentificationBundle\Identification\Handler\DefaultHandler'

    IdentificationBundle\Identification\Identifier:
        arguments:
            - '@IdentificationBundle\Identification\Handler\IdentificationHandlerProvider'
            - '@IdentificationBundle\Repository\CarrierRepositoryInterface'
            - '@logger'
            - '@IdentificationBundle\Identification\Common\CommonFlowHandler'
            - '@IdentificationBundle\Identification\Common\HeaderEnrichmentHandler'
            - '@IdentificationBundle\Identification\Common\CommonConsentPageFlowHandler'

    IdentificationBundle\Identification\Common\CommonFlowHandler:
        arguments:
            - '@IdentificationBundle\BillingFramework\Process\IdentProcess'
            - '@IdentificationBundle\Identification\Handler\IdentificationHandlerProvider'
            - '@IdentificationBundle\Identification\Common\RequestParametersProvider'
            - '@IdentificationBundle\Identification\Service\RouteProvider'
            - '@IdentificationBundle\Identification\Common\Pixel\PixelIdentStarter'
            - '@IdentificationBundle\Identification\Common\Async\AsyncIdentStarter'
            - '@router'
            - '@IdentificationBundle\Identification\Service\RouteProvider'

    IdentificationBundle\Identification\Common\RequestParametersProvider:
        arguments:
            - '@SubscriptionBundle\Subscription\Common\RouteProvider'
            - '@SubscriptionBundle\BillingFramework\BillingOptionsProvider'

    IdentificationBundle\Identification\Common\Pixel\PixelIdentStarter:
        arguments:
            - '@router'
            - '@IdentificationBundle\Identification\Service\RouteProvider'
            - '@ExtrasBundle\SignatureCheck\SignatureHandler'
            - '@ExtrasBundle\SignatureCheck\ParametersProvider'


    IdentificationBundle\Identification\Common\Pixel\PixelIdentVerifier:
        arguments:
            - '@IdentificationBundle\BillingFramework\Process\AfterPixelProcess'
            - '@SubscriptionBundle\BillingFramework\BillingOptionsProvider'

    IdentificationBundle\Identification\Common\Pixel\PixelIdentConfirmer:
        arguments:
            - '@doctrine.orm.entity_manager'
            - '@IdentificationBundle\User\Service\UserFactory'
            - '@IdentificationBundle\Repository\CarrierRepositoryInterface'
            - '@IdentificationBundle\BillingFramework\Data\DataProvider'
            - '@IdentificationBundle\Identification\Handler\IdentificationHandlerProvider'
            - '@IdentificationBundle\Identification\Service\IdentificationStatus'
            - '@IdentificationBundle\Identification\Service\TokenGenerator'
            - '@IdentificationBundle\Repository\UserRepository'
            - '@IdentificationBundle\Identification\Common\PostPaidHandler'


    IdentificationBundle\Identification\Common\Async\AsyncIdentStarter:
        arguments:
            - '@IdentificationBundle\Identification\Service\Session\IdentificationDataStorage'

    IdentificationBundle\Identification\Common\Async\AsyncIdentFinisher:
        arguments:
            - '@IdentificationBundle\Identification\Service\Session\IdentificationDataStorage'
            - '@IdentificationBundle\Repository\UserRepository'
            - '@IdentificationBundle\Identification\Service\IdentificationStatus'
            - '@IdentificationBundle\Identification\Handler\IdentificationHandlerProvider'
            - '@IdentificationBundle\BillingFramework\Data\DataProvider'

    IdentificationBundle\Identification\Service\TokenGenerator: ~

    IdentificationBundle\Identification\Common\HeaderEnrichmentHandler:
        arguments:
            - '@IdentificationBundle\User\Service\UserFactory'
            - '@doctrine.orm.entity_manager'
            - '@IdentificationBundle\Repository\UserRepository'
            - '@IdentificationBundle\Identification\Service\IdentificationStatus'
            - '@IdentificationBundle\Identification\Common\PostPaidHandler'

    IdentificationBundle\Identification\Service\RouteProvider:
        arguments:
            - '@router'
            - '_wifi_route_placeholder_'
            - '_homepage_route_placeholder_'
            - '_landing_route_placeholder_'
            - '_my_account_route_placeholder_'

    IdentificationBundle\Identification\Service\ISPResolver: ~

    IdentificationBundle\Identification\Service\Session\IdentificationDataStorage:
        arguments: ['@IdentificationBundle\Identification\Service\Session\SessionStorage']

    IdentificationBundle\Identification\IdentifierByUrl:
        arguments:
            - '@IdentificationBundle\Repository\UserRepository'
            - '@IdentificationBundle\Identification\Service\IdentificationStatus'
            - '@IdentificationBundle\Identification\Service\TokenGenerator'
            - '@doctrine.orm.entity_manager'

    IdentificationBundle\Identification\Service\IdentificationStatus:
        arguments:
            - '@IdentificationBundle\Identification\Service\Session\IdentificationDataStorage'
            - '@IdentificationBundle\WifiIdentification\Service\WifiIdentificationDataStorage'

    IdentificationBundle\Identification\Common\Async\AsyncIdentStatusProvider:
        arguments:
            - '@IdentificationBundle\Identification\Service\Session\IdentificationDataStorage'
            - '@IdentificationBundle\Repository\UserRepository'


    IdentificationBundle\Identification\Common\CommonConsentPageFlowHandler:
        arguments:
            - '@router'
            - '@IdentificationBundle\Identification\Service\Session\IdentificationDataStorage'
            - '@IdentificationBundle\Identification\Service\TokenGenerator'
            - '@IdentificationBundle\Identification\Common\RequestParametersProvider'
            - '@IdentificationBundle\BillingFramework\Process\IdentProcess'
            - '@IdentificationBundle\Identification\Common\Async\AsyncIdentStarter'

    IdentificationBundle\Identification\Service\CarrierSelector:
        arguments:
            - '@IdentificationBundle\Repository\CarrierRepositoryInterface'
            - '@IdentificationBundle\Identification\Service\Session\IdentificationDataStorage'

    IdentificationBundle\Identification\Service\DeviceDataProvider:
        arguments: ['@device_detection.service.device', '@CountryCarrierDetectionBundle\Service\ConnectionTypeService']

    IdentificationBundle\Identification\Common\PostPaidHandler:
        arguments:
            - '@logger'
            - '@SubscriptionBundle\BillingFramework\Process\API\Client'
            - '@SubscriptionBundle\BillingFramework\Process\API\LinkCreator'
            - '@IdentificationBundle\Identification\Service\Session\IdentificationDataStorage'
            - '@SubscriptionBundle\BillingFramework\BillingOptionsProvider'

    IdentificationBundle\Identification\Handler\AlreadySubscribedHandlerProvider: ~

    IdentificationBundle\Identification\Service\AlreadySubscribedIdentFinisher:
        arguments:
            - '@IdentificationBundle\Identification\Service\IdentificationStatus'
            - '@IdentificationBundle\Identification\Handler\AlreadySubscribedHandlerProvider'

    IdentificationBundle\Identification\Controller\PixelIdentController:
      tags: ['controller.service_arguments']
      arguments:
        - '@IdentificationBundle\Identification\Common\Pixel\PixelIdentVerifier'
        - '@IdentificationBundle\Identification\Common\Pixel\PixelIdentConfirmer'
        - '@IdentificationBundle\Identification\Service\RouteProvider'
        - '@IdentificationBundle\BillingFramework\Data\DataProvider'
        - '@IdentificationBundle\Identification\Service\Session\IdentificationDataStorage'
        - '@logger'

    IdentificationBundle\Identification\Controller\IdentificationController:
      tags: ['controller.service_arguments']
      arguments:
        - '@IdentificationBundle\Identification\Identifier'
        - '@IdentificationBundle\Identification\Service\TokenGenerator'
        - '@IdentificationBundle\Identification\IdentifierByUrl'
        - '@IdentificationBundle\Identification\Service\RouteProvider'
        - '@IdentificationBundle\Identification\Service\Session\IdentificationDataStorage'
        - '@logger'

    IdentificationBundle\Identification\Controller\FakeIdentificationController:
      tags: ['controller.service_arguments']
      arguments:
        - '@CountryCarrierDetectionBundle\Service\MaxMindIpInfo'
        - '@IdentificationBundle\Repository\CarrierRepositoryInterface'
        - '@IdentificationBundle\Repository\UserRepository'
        - '@IdentificationBundle\Identification\Service\ISPResolver'
        - '@IdentificationBundle\Identification\Identifier'
        - '@IdentificationBundle\Identification\Service\TokenGenerator'
        - '@IdentificationBundle\User\Service\UserFactory'
        - '@doctrine.orm.entity_manager'
        - '@IdentificationBundle\Identification\Service\RouteProvider'
        - '@IdentificationBundle\Identification\Service\Session\IdentificationDataStorage'


    IdentificationBundle\Identification\Controller\AsyncIdentController:
      tags: ['controller.service_arguments']
      arguments:
          - '@IdentificationBundle\Identification\Service\RouteProvider'
          - '@IdentificationBundle\Identification\Common\Async\AsyncIdentFinisher'
          - '@IdentificationBundle\Identification\Common\Async\AsyncIdentStatusProvider'

    IdentificationBundle\Identification\Profiler\IdentDataCollector:
      tags:
        - { name: data_collector, template: '@Identification/profiler/debug_ident.html.twig', id: 'identification.ident_data_collector' }
      arguments:
        - '@IdentificationBundle\WifiIdentification\Service\WifiIdentificationDataStorage'
        - '@SubscriptionBundle\Repository\SubscriptionRepository'
        - '@IdentificationBundle\Repository\UserRepository'

    IdentificationBundle\Identification\Profiler\FakeCarrierIdentifier:
      tags:
        - {name: data_collector, template: '@Identification/profiler/fake_carrier_identifier.html.twig', id: 'identification.fake_carrier_identifier'}
      arguments: ['@IdentificationBundle\Repository\CarrierRepositoryInterface']
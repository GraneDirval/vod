services:
    SubscriptionBundle\Subscription\Subscribe\Subscriber:
        arguments:
            - '@monolog.logger.subscription'
            - '@SubscriptionBundle\Service\EntitySaveHelper'
            - '@session'
            - '@SubscriptionBundle\Subscription\Common\SubscriptionFactory'
            - '@SubscriptionBundle\Subscription\Common\PromotionalResponseChecker'
            - '@SubscriptionBundle\Subscription\Common\FakeResponseProvider'
            - '@SubscriptionBundle\Subscription\Notification\Notifier'
            - '@SubscriptionBundle\BillingFramework\Process\SubscribeProcess'
            - '@SubscriptionBundle\Subscription\Subscribe\OnSubscribeUpdater'
            - '@SubscriptionBundle\Subscription\Subscribe\SubscribeParametersProvider'
            - '@SubscriptionBundle\CAPTool\Subscription\SubscriptionLimitCompleter'
            - '@SubscriptionBundle\Subscription\Common\SubscriptionSerializer'
            - '@SubscriptionBundle\Subscription\Subscribe\Common\SubscribePerformer'
            - '@SubscriptionBundle\Subscription\Subscribe\Common\SubscribePromotionalPerformer'
            - '@cross_subscription.api_connector'

    SubscriptionBundle\Subscription\Subscribe\Handler\SubscriptionHandlerProvider:
        arguments: ['@SubscriptionBundle\Subscription\Subscribe\Handler\DefaultHandler']

    SubscriptionBundle\Subscription\Subscribe\Common\CommonFlowHandler:
        arguments:
            - '@SubscriptionBundle\Subscription\Common\SubscriptionExtractor'
            - '@SubscriptionBundle\SubscriptionPack\SubscriptionPackProvider'
            - '@SubscriptionBundle\Subscription\Subscribe\Subscriber'
            - '@SubscriptionBundle\Subscription\Subscribe\Common\SubscriptionEligibilityChecker'
            - '@logger'
            - '@SubscriptionBundle\Subscription\Subscribe\Handler\SubscriptionHandlerProvider'
            - '@SubscriptionBundle\Subscription\Subscribe\Common\CommonResponseCreator'
            - '@ExtrasBundle\Utils\UrlParamAppender'
            - '@SubscriptionBundle\Service\EntitySaveHelper'
            - '@SubscriptionBundle\Subscription\Subscribe\Common\SubscriptionEventTracker'
            - '@SubscriptionBundle\Subscription\Subscribe\Common\ZeroCreditSubscriptionChecking'
            - '@SubscriptionBundle\Subscription\Common\RouteProvider'

    SubscriptionBundle\Subscription\Subscribe\Common\SubscriptionEligibilityChecker: ~

    SubscriptionBundle\Subscription\Unsubscribe\UnsubscriptionEligibilityChecker: ~

    SubscriptionBundle\Subscription\Common\RedirectUrlNullifier:
        arguments: ['@SubscriptionBundle\Service\EntitySaveHelper']

    SubscriptionBundle\Subscription\Subscribe\Service\BlacklistVoter:
        arguments:
            - '@router'
            - '@SubscriptionBundle\Blacklist\BlacklistChecker'
            - '@logger'

    SubscriptionBundle\Subscription\Subscribe\OnSubscribeUpdater:
        arguments:
            - '@SubscriptionBundle\Subscription\Common\SubscriptionExtractor'
            - '@SubscriptionBundle\Subscription\Subscribe\Service\CreditsCalculator'
            - '@SubscriptionBundle\Subscription\Renew\Service\RenewDateCalculator'
            - '@event_dispatcher'
            - '@SubscriptionBundle\Subscription\Common\CommonSubscriptionUpdater'
            - '@SubscriptionBundle\CAPTool\Subscription\SubscriptionLimiter'

    SubscriptionBundle\Subscription\Subscribe\Common\CommonResponseCreator:
        arguments:
            - '@SubscriptionBundle\Subscription\Common\SubscriptionExtractor'
            - '@SubscriptionBundle\Subscription\Common\RedirectUrlNullifier'

    SubscriptionBundle\Subscription\Subscribe\Common\SubscribePerformer:
        arguments:
            - '@SubscriptionBundle\BillingFramework\Process\SubscribeProcess'
            - '@SubscriptionBundle\Subscription\Subscribe\SubscribeParametersProvider'

    SubscriptionBundle\Subscription\Subscribe\Common\SubscribePromotionalPerformer:
        arguments:
            - '@logger'
            - '@SubscriptionBundle\Subscription\Notification\Notifier'
            - '@SubscriptionBundle\Subscription\Common\FakeResponseProvider'
            - '@SubscriptionBundle\Subscription\Common\SubscriptionSerializer'

    SubscriptionBundle\Subscription\Subscribe\Handler\DefaultHandler: ~

    SubscriptionBundle\Subscription\Subscribe\SubscribeParametersProvider:
        arguments: ['@SubscriptionBundle\Subscription\Common\RequestParametersProvider', '@request_stack', '@router']

    SubscriptionBundle\Subscription\Subscribe\Common\SubscriptionEventTracker:
        arguments:
            - '@SubscriptionBundle\Affiliate\Service\AffiliateSender'
            - '@SubscriptionBundle\Affiliate\Service\UserInfoMapper'
            - '@SubscriptionBundle\Piwik\SubscriptionStatisticSender'
            - '@session'

    SubscriptionBundle\Subscription\Subscribe\Consent\ConsentFlowHandler:
        arguments:
            - '@logger'
            - '@SubscriptionBundle\Subscription\Common\SubscriptionExtractor'
            - '@SubscriptionBundle\SubscriptionPack\SubscriptionPackProvider'
            - '@SubscriptionBundle\Subscription\Subscribe\Subscriber'
            - '@SubscriptionBundle\Subscription\Subscribe\Common\SubscriptionEventTracker'
            - '@SubscriptionBundle\Service\EntitySaveHelper'
            - '@IdentificationBundle\Identification\Service\RouteProvider'
            - '@SubscriptionBundle\Subscription\Subscribe\Common\SubscriptionEligibilityChecker'
            - '@ExtrasBundle\Utils\UrlParamAppender'
            - '@router.default'
            - '@SubscriptionBundle\Subscription\Subscribe\Common\CommonResponseCreator'
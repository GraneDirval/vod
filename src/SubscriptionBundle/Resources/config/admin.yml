services:
    SubscriptionBundle\Admin\Sonata\SubscriptionPackAdmin:
        arguments:
            - ~
            - SubscriptionBundle\Entity\SubscriptionPack
            - ~ #'SubscriptionBundle\Admin\Controller\SubscriptionPackAdminController'
            - '@SubscriptionBundle\BillingFramework\Process\SubscriptionPackDataProvider'
            - '@App\Domain\Repository\CarrierRepository'
            - '@SubscriptionBundle\Repository\SubscriptionPackRepository'
            - '@CommonDataBundle\Repository\CountryRepository'
        tags:
            -   name: sonata.admin
                manager_type: orm
                group: carrier_management
                label: Subscription Pack
        calls:
            - [ setTemplate, [edit, '@@SubscriptionAdmin/SubscriptionPack/edit.html.twig']]

    SubscriptionBundle\Admin\Sonata\RefundAdmin:
        arguments: [~, SubscriptionBundle\Entity\Refund, 'SubscriptionBundle\Admin\Controller\RefundAdminController']
        tags:
            - { name: sonata.admin, manager_type: orm, group: refunds, label: Refunds }

    SubscriptionBundle\Admin\Sonata\UnsubscriptionAdmin:
        arguments:
            - ~
            - SubscriptionBundle\Entity\Subscription
            - 'SubscriptionBundle\Admin\Controller\UnsubscriptionAdminController'
        tags:
            - { name: sonata.admin, manager_type: orm, group: user_management, label: Unsubscriptions }

    SubscriptionBundle\Admin\Sonata\ComplaintsAdmin:
        arguments:
            - ~
            - IdentificationBundle\Entity\User
            - 'SubscriptionBundle\Admin\Controller\ComplaintsAdminController'
        tags:
            - { name: sonata.admin, manager_type: orm, group: user_management, label: Complaints }

    SubscriptionBundle\Admin\Sonata\BlackListAdmin:
        arguments:
            - ~
            - SubscriptionBundle\Entity\BlackList
            - ~
            - '@SubscriptionBundle\Blacklist\BlacklistSaver'
        tags:
            - { name: sonata.admin, manager_type: orm, group: black_list_management, label: Black list }
        calls:
            - [ setTemplate, [edit, '@@SubscriptionAdmin/BlackList/edit.html.twig']]

    SubscriptionBundle\Admin\Sonata\AffiliateLogAdmin:
        arguments:
            - ~
            - SubscriptionBundle\Entity\Affiliate\AffiliateLog
            - ~
            - '@IdentificationBundle\Repository\TestUserRepository'
        tags:
            - { name: sonata.admin, manager_type: orm, group: affiliate_management, label: Affiliate log }

    SubscriptionBundle\Admin\Sonata\ConstraintsByAffiliateAdmin:
        autowire: true
        arguments:
            - ~
            - SubscriptionBundle\Entity\Affiliate\ConstraintByAffiliate
            - ~
            - '@SubscriptionBundle\Repository\Affiliate\ConstraintByAffiliateRepository'
            - '@doctrine.orm.entity_manager'
            - '@SubscriptionBundle\Admin\Service\ConstraintByAffiliateCapCalculator'
        tags:
            - { name: sonata.admin, manager_type: orm, group: affiliate_management, label: Constraints by affiliate }

    SubscriptionBundle\Admin\Service\ConstraintByAffiliateCapCalculator:
        arguments:
            - '@SubscriptionBundle\CAPTool\Subscription\Limiter\StorageKeyGenerator'
            - '@SubscriptionBundle\CAPTool\Subscription\Limiter\LimiterStorage'
            - '@SubscriptionBundle\CAPTool\Visit\KeyGenerator'
            - '@SubscriptionBundle\CAPTool\Visit\VisitStorage'
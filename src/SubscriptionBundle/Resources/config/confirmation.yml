services:
    SubscriptionBundle\Affiliate\CampaignConfirmation\Google\Controller\CampaignConfirmationController: ~

    SubscriptionBundle\Affiliate\CampaignConfirmation\Handler\CampaignConfirmationHandlerProvider:
        arguments:
            - '@SubscriptionBundle\Affiliate\CampaignConfirmation\Handler\Common\DefaultHandler'
            - '@SubscriptionBundle\Affiliate\Service\CampaignExtractor'

    SubscriptionBundle\Affiliate\CampaignConfirmation\Handler\Common\DefaultHandler:
        arguments:
            - '@logger'
            - '@SubscriptionBundle\Affiliate\Service\GuzzleClientFactory'
            - '@SubscriptionBundle\Affiliate\Service\AffiliateLogFactory'
            - '@doctrine.orm.entity_manager'

    SubscriptionBundle\Affiliate\CampaignConfirmation\Google\Handler\GoogleCampaignHandler:
        tags:
            - {name: 'subscription.campaign_confirmation_handler'}
        arguments:
            - '@router.default'
            - '@SubscriptionBundle\Affiliate\CampaignConfirmation\Google\Service\OfflineConversionTracker'
            - '@SubscriptionBundle\Repository\Affiliate\AffiliateLogRepository'

    SubscriptionBundle\Affiliate\CampaignConfirmation\Command\ProcessDelayedConfirmationsCommand:
        arguments:
            - '@SubscriptionBundle\Repository\Affiliate\AffiliateLogRepository'
            - '@SubscriptionBundle\Affiliate\CampaignConfirmation\Handler\CampaignConfirmationHandlerProvider'
            - '@SubscriptionBundle\Repository\Affiliate\CampaignRepositoryInterface'
            - '@doctrine.orm.entity_manager'
            - '@logger'
            - '@debug.stopwatch'
        tags:
            - { name: console.command }

    SubscriptionBundle\Affiliate\CampaignConfirmation\Google\Service\OfflineConversionTracker:
        arguments:
            - '@SubscriptionBundle\Affiliate\CampaignConfirmation\Google\Service\FeedConversionServiceProvider'
            - '@doctrine.orm.entity_manager'


    SubscriptionBundle\Affiliate\CampaignConfirmation\Google\Service\FeedConversionServiceProvider:
        arguments:
            - '@SubscriptionBundle\Affiliate\CampaignConfirmation\Google\Service\GoogleCredentialsProvider'

    SubscriptionBundle\Affiliate\CampaignConfirmation\Google\Service\GoogleCredentialsProvider:
        arguments:
            - '_client_id_placeholder_'
            - '_client_secret_placeholder_'
            - '_refresh_token_placeholder_'
            - '_developer_token_placeholder_'
            - '_client_customer_id_placeholder_'
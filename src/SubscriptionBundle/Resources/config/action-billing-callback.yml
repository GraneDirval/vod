services:

  SubscriptionBundle\Subscription\Callback\Controller\ListenAction:
    arguments: ['@SubscriptionBundle\Subscription\Callback\Common\CommonFlowHandler', '@logger', '@SubscriptionBundle\Subscription\Callback\Impl\CarrierCallbackHandlerProvider']
    tags: ['controller.service_arguments']


  SubscriptionBundle\Subscription\Callback\Impl\DefaultHandler:
    arguments: ['@IdentificationBundle\Repository\UserRepository']

  SubscriptionBundle\Subscription\Callback\Common\CommonFlowHandler:
      arguments:
        - '@logger'
        - '@SubscriptionBundle\Subscription\Callback\Common\CallbackTypeHandlerProvider'
        - '@SubscriptionBundle\BillingFramework\Process\API\ProcessResponseMapper'
        - '@SubscriptionBundle\Repository\SubscriptionRepository'
        - '@SubscriptionBundle\Service\EntitySaveHelper'
        - '@SubscriptionBundle\Affiliate\Service\AffiliateSender'
        - '@SubscriptionBundle\Affiliate\Service\UserInfoMapper'
        - '@SubscriptionBundle\Subscription\Callback\Impl\CarrierCallbackHandlerProvider'
        - '@SubscriptionBundle\Piwik\DataMapper\ConversionEventMapper'
        - '@SubscriptionBundle\Piwik\EventPublisher'

      public: false

  SubscriptionBundle\Subscription\Callback\Impl\CarrierCallbackHandlerProvider:
      arguments:
        - '@SubscriptionBundle\Subscription\Callback\Impl\DefaultHandler'

  SubscriptionBundle\Subscription\Callback\Common\CallbackTypeHandlerProvider:
      arguments:
        - '@SubscriptionBundle\Subscription\Callback\Common\Type\UnsubscriptionCallbackHandler'
        - '@SubscriptionBundle\Subscription\Callback\Common\Type\SubscriptionCallbackHandler'
        - '@SubscriptionBundle\Subscription\Callback\Common\Type\RenewCallbackHandler'

  SubscriptionBundle\Subscription\Callback\Common\Type\AbstractCallbackHandler: ~

  SubscriptionBundle\Subscription\Callback\Common\Type\UnsubscriptionCallbackHandler:
        arguments:
            - '@SubscriptionBundle\Subscription\Unsubscribe\OnUnsubscribeUpdater'

  SubscriptionBundle\Subscription\Callback\Common\Type\SubscriptionCallbackHandler:
      arguments:
          - '@SubscriptionBundle\Subscription\Subscribe\OnSubscribeUpdater'
          - '@SubscriptionBundle\CAPTool\Subscription\SubscriptionLimitCompleter'
          - '@cross_subscription.api_connector'

  SubscriptionBundle\Subscription\Callback\Common\Type\RenewCallbackHandler:
      arguments:
          - '@SubscriptionBundle\Subscription\Renew\OnRenewUpdater'
          - '@event_dispatcher'
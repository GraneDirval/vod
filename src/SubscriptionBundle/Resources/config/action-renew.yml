services:
  SubscriptionBundle\Subscription\Renew\Renewer:
      arguments:
        - '@logger'
        - '@event_dispatcher'
        - '@SubscriptionBundle\Service\EntitySaveHelper'
        - '@SubscriptionBundle\BillingFramework\Process\RenewProcess'
        - '@SubscriptionBundle\Subscription\Renew\OnRenewUpdater'
        - '@SubscriptionBundle\Subscription\Renew\RenewParametersProvider'

  SubscriptionBundle\Subscription\Renew\OnRenewUpdater:
      arguments:
        - '@SubscriptionBundle\Subscription\Renew\Service\RenewDateCalculator'
        - '@SubscriptionBundle\Subscription\Common\SubscriptionExtractor'
        - '@SubscriptionBundle\Subscription\Subscribe\Service\CreditsCalculator'
        - '@event_dispatcher'
        - '@SubscriptionBundle\Subscription\Common\CommonSubscriptionUpdater'

  SubscriptionBundle\Subscription\Renew\RenewParametersProvider:
      arguments: ['@SubscriptionBundle\Subscription\Common\RequestParametersProvider', '@SubscriptionBundle\Subscription\Common\RouteProvider']

  SubscriptionBundle\Subscription\Renew\Handler\RenewHandlerProvider:
      arguments: ['@SubscriptionBundle\Subscription\Renew\Handler\DefaultHandler']

  SubscriptionBundle\Subscription\Renew\Handler\DefaultHandler: ~

  SubscriptionBundle\Subscription\Renew\Common\RenewAlertTypeProvider: ~

  SubscriptionBundle\Subscription\Renew\Controller\InstantRenewAction:
    arguments:
      - '@SubscriptionBundle\Subscription\MassRenew\Command\MassRenewCommand'
      - '@twig'
    tags: ['controller.service_arguments']

  SubscriptionBundle\Subscription\Renew\Controller\InstantAlertAction:
    arguments:
      - '@SubscriptionBundle\Subscription\Renew\Command\IncomingRenewNotificationCommand'
      - '@twig'
    tags: ['controller.service_arguments']

  SubscriptionBundle\Subscription\Renew\Service\RenewDateCalculator: ~

  SubscriptionBundle\Subscription\Renew\Command\IncomingRenewNotificationCommand:
    arguments: ['@IdentificationBundle\Repository\CarrierRepositoryInterface', '@SubscriptionBundle\Subscription\Renew\Service\RenewAlerter']
    tags:
      - { name: console.command }

  SubscriptionBundle\Subscription\Renew\Service\RenewAlerter:
    arguments:
      - '@SubscriptionBundle\Repository\SubscriptionRepository'
      - '@SubscriptionBundle\Subscription\Renew\Handler\RenewHandlerProvider'
      - '@SubscriptionBundle\Service\EntitySaveHelper'

  cron.task:
    class: SubscriptionBundle\Subscription\Renew\Cron\CronTaskStatus
    arguments: ['@doctrine.orm.default_entity_manager', '@SubscriptionBundle\Repository\CronTaskRepository']


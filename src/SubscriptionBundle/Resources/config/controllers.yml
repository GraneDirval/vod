services:

    _defaults:
        tags: ['controller.service_arguments']


    SubscriptionBundle\Controller\Actions\SubscribeAction:
        arguments:
            - '@SubscriptionBundle\Service\UserExtractor'
            - '@SubscriptionBundle\Service\Action\Subscribe\Common\CommonFlowHandler'
            - '@router.default'
            - '@logger'
            - '@ExtrasBundle\Utils\UrlParamAppender'
            - '@SubscriptionBundle\Service\Action\Subscribe\Handler\SubscriptionHandlerProvider'
            - '@SubscriptionBundle\Service\Action\Subscribe\Common\BlacklistVoter'
            - '@IdentificationBundle\Identification\Service\IdentificationDataStorage'
            - '@IdentificationBundle\Identification\Handler\IdentificationHandlerProvider'
            - '@IdentificationBundle\Repository\CarrierRepositoryInterface'
            - '%default_redirect_url%'
            - '@IdentificationBundle\Identification\Common\PostPaidHandler'
            - '@SubscriptionBundle\Service\CampaignConfirmation\Handler\CampaignConfirmationHandlerProvider'
            - '@SubscriptionBundle\Service\CAPTool\SubscriptionLimiter'
            - '@SubscriptionBundle\Service\CAPTool\SubscriptionLimitNotifier'
            - '@SubscriptionBundle\Service\Blacklist\BlacklistAttemptRegistrator'

    SubscriptionBundle\Controller\Actions\ListenAction:
        arguments: ['@SubscriptionBundle\Service\Callback\Common\CommonFlowHandler', '@logger', '@SubscriptionBundle\Service\Callback\Impl\CarrierCallbackHandlerProvider']

    #SubscriptionBundle\Controller\Actions\SubscribeBackAction:
    #    arguments: ['@SubscriptionBundle\Service\Action\SubscribeBack\SubscribeBackHandlerProvider', '@router']

    SubscriptionBundle\Controller\Actions\RedirectAction:
        arguments: ['@SubscriptionBundle\Service\UserExtractor', '@monolog.logger', '@SubscriptionBundle\Service\SubscriptionExtractor']

    SubscriptionBundle\Controller\Actions\UnsubscribeAction:
        arguments:
            - '@SubscriptionBundle\Service\UserExtractor'
            - '@SubscriptionBundle\Service\SubscriptionExtractor'
            - '@SubscriptionBundle\Service\SubscriptionPackProvider'
            - '@SubscriptionBundle\Service\Action\Unsubscribe\Unsubscriber'
            - '@SubscriptionBundle\Service\Action\Unsubscribe\UnsubscriptionEligibilityChecker'
            - '@SubscriptionBundle\Service\Action\Unsubscribe\Handler\UnsubscriptionHandlerProvider'

    SubscriptionBundle\Controller\Actions\WaitAction:
        class: SubscriptionBundle\Controller\Actions\WaitAction
        arguments: ['@SubscriptionBundle\Service\UserExtractor', '@SubscriptionBundle\Service\SubscriptionExtractor', '@router.default']

    SubscriptionBundle\Controller\Actions\GetSubscriptionAction:
        class: SubscriptionBundle\Controller\Actions\GetSubscriptionAction
        arguments: ['@SubscriptionBundle\Service\UserExtractor', '@SubscriptionBundle\Service\SubscriptionExtractor']

    SubscriptionBundle\Controller\Actions\Fake\RenewAction:
        arguments:
            - '@SubscriptionBundle\Command\MassRenewCommand'
            - '@twig'

    SubscriptionBundle\Controller\Actions\Fake\AlertAction:
        arguments:
            - '@SubscriptionBundle\Command\IncomingRenewNotificationCommand'
            - '@twig'

    SubscriptionBundle\Controller\Actions\Fake\SubscribeAction:
        arguments:
            - '@SubscriptionBundle\Service\UserExtractor'
            - '@router.default'
            - '@logger'
            - '@SubscriptionBundle\Service\SubscriptionExtractor'
            - '@SubscriptionBundle\Service\SubscriptionPackProvider'
            - '@SubscriptionBundle\Service\EntitySaveHelper'

    SubscriptionBundle\Controller\Actions\Fake\UnsubscribeAction:
        arguments:
            - '@SubscriptionBundle\Service\UserExtractor'
            - '@SubscriptionBundle\Service\SubscriptionExtractor'
            - '@SubscriptionBundle\Service\Action\Unsubscribe\UnsubscriptionEligibilityChecker'
            - '@SubscriptionBundle\Service\EntitySaveHelper'

    SubscriptionBundle\Controller\Actions\ConsentPageSubscribeAction:
        arguments:
            - '@IdentificationBundle\Repository\CarrierRepositoryInterface'
            - '@IdentificationBundle\Identification\Handler\IdentificationHandlerProvider'
            - '@SubscriptionBundle\Service\Action\Subscribe\Handler\SubscriptionHandlerProvider'
            - '@SubscriptionBundle\Service\UserExtractor'
            - '@SubscriptionBundle\Service\Action\Subscribe\Consent\ConsentFlowHandler'

    SubscriptionBundle\Admin\Controller\SubscriptionPackAdminController:
        calls: [['setContainer', ['@service_container']]]

    SubscriptionBundle\Admin\Controller\RefundAdminController:
        arguments: ['@form.factory', '@SubscriptionBundle\Service\RefundService']

    SubscriptionBundle\Admin\Controller\UnsubscriptionAdminController:
        arguments:
            - '@form.factory'
            - '@SubscriptionBundle\Service\Action\Unsubscribe\Unsubscriber'
            - '@SubscriptionBundle\Service\Action\Unsubscribe\Handler\UnsubscriptionHandlerProvider'

    SubscriptionBundle\Admin\Controller\ComplaintsAdminController:
        arguments:
            - '@form.factory'
            - '@SubscriptionBundle\Service\ReportingToolService'

    SubscriptionBundle\Controller\SubnotifController:
        arguments:
            - '@SubscriptionBundle\Service\Notification\Notifier'
            - '@App\Domain\Repository\CarrierRepository'
            - '@IdentificationBundle\Repository\UserRepository'
            - '@session'
            - '@ExtrasBundle\Utils\LocalExtractor'
            - '@SubscriptionBundle\Service\SubscriptionPackProvider'
            - '@App\Domain\Service\Translator\Translator'
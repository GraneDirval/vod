services:

  handler.billing_callback_tim:
      class: SubscriptionBundle\Carriers\TimBR\Callback\TimHandler
      arguments: ["@subscription.tim_subscriber"]
      tags:
        - { name: subscription.callback_carrier_handler, type: subscribe }
        - { name: subscription.callback_carrier_handler, type: unsubscribe }
        - { name: subscription.callback_carrier_handler, type: renew }

  subscription.tim_subscriber:
      class: SubscriptionBundle\Carriers\TimBR\Callback\TimCallbackHandler
      arguments:
        - '@subscription.subscription.repository'
        - '@subscription.entity_save_helper'
        - '@subscription.billing_framework_process_response_mapper'
        - '@user.billable_user.repository'
        - '@subscription.piwic_statistic_sender'
        - '@subscription.unsubscribe.updater'
        - '@subscription.renewer.updater'
        - '@affiliate.affiliate.service'
        - '@affiliate.user_info_mapper'

  handler.subscribe_back.tim:
      class: SubscriptionBundle\Carriers\TimBR\SubscribeBack\TimHandler
      arguments: ["@subscription.tim.service", '@router']

  subscription.legacy.mobilife_service:
    class: SubscriptionBundle\Service\Legacy\MobilifeSubscriberService
    arguments: ['@router']

  subscription.tim.service:
      class: SubscriptionBundle\Carriers\TimBR\SubscribeBack\TimBackSubscriber
      arguments:
        - '@subscription.entity_save_helper'
        - '@user.billable_user.repository'
        - '@subscription.subscription.repository'
        - '@subscription.subscription_creator'
        - '@subscription.billing_framework_renew_date_calculator'
        - '@subscription.billing_framework_credit_calculator'
        - '@subscription.subscription_pack_provider'
        - '@subscription.subscription_provider'

  subscription.subscriber.tim:
    class: SubscriptionBundle\Carriers\TimBR\Subscribe\TimBRHandler
    arguments: ['@subscription.subscription_provider', '@subscription.redirect_url_nullifier']
    tags:
         - { name: subscription.subscription_handler }
